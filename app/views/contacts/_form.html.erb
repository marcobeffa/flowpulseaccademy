<!-- app/views/contacts/_form.html.erb -->
<%= form_with(model: contact, local: true, class: "space-y-8") do |f| %>
  <% if contact.errors.any? %>
    <div class="rounded-xl border border-red-200 bg-red-50 p-4">
      <p class="font-semibold text-red-800">
        Ci sono <%= pluralize(contact.errors.count, "errore") %> nel form:
      </p>
      <ul class="mt-2 list-disc pl-5 text-sm text-red-700">
        <% contact.errors.full_messages.each { |m| %>
        <li><%= m %></li>
        <% } %>
      </ul>
    </div>
  <% end %>
  <!-- Dati personali -->
  <div class="grid gap-6 md:grid-cols-2">
    <div>
      <%= f.label :nome, "Nome *", class: "block text-sm font-semibold text-gray-700 mb-2" %>
      <%= f.text_field :nome, required: true,
            class: "w-full rounded-lg border-2 border-gray-200 bg-gray-50 px-4 py-3 focus:border-blue-500 focus:bg-white focus:outline-none" %>
    </div>
    <div>
      <%= f.label :cognome, "Cognome *", class: "block text-sm font-semibold text-gray-700 mb-2" %>
      <%= f.text_field :cognome, required: true,
            class: "w-full rounded-lg border-2 border-gray-200 bg-gray-50 px-4 py-3 focus:border-blue-500 focus:bg-white focus:outline-none" %>
    </div>
  </div>
  <div>
    <%= f.label :email, "Email *", class: "block text-sm font-semibold text-gray-700 mb-2" %>
    <%= f.email_field :email, required: true, autocomplete: "email",
          class: "w-full rounded-lg border-2 border-gray-200 bg-gray-50 px-4 py-3 focus:border-blue-500 focus:bg-white focus:outline-none" %>
  </div>
  <%# opzionale: rimuovi se non hai la colonna %>
  <div>
    <%= f.label :telefono_facoltativo, "Telefono", class: "block text-sm font-semibold text-gray-700 mb-2" %>
    <%= f.telephone_field :telefono_facoltativo, autocomplete: "tel",
          class: "w-full rounded-lg border-2 border-gray-200 bg-gray-50 px-4 py-3 focus:border-blue-500 focus:bg-white focus:outline-none" %>
  </div>
  <!-- Tipo utente (card radio, senza JS) -->
  <div>
    <%= f.label :tipo_utente, "Chi sei? *", class: "block text-sm font-semibold text-gray-700 mb-3" %>
    <div class="grid gap-4 md:grid-cols-3">
      <!-- Utente (BLU) -->
      <label class="cursor-pointer">
        <%= f.radio_button :tipo_utente, "utente", class: "peer sr-only", required: true %>
        <div class="rounded-2xl border-2 border-gray-200 bg-gray-50 p-6 text-center transition
                    peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:scale-105">
          <div class="mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100">
            <span class="text-xl">👤</span>
          </div>
          <h3 class="font-bold text-gray-900">Utente</h3>
          <p class="mt-2 text-sm text-gray-600">Persona interessata al programma</p>
        </div>
      </label>
      <!-- Professionista Salute (ROSSO) -->
      <label class="cursor-pointer">
        <%= f.radio_button :tipo_utente, "professionista_salute", class: "peer sr-only", required: true %>
        <div class="rounded-2xl border-2 border-gray-200 bg-gray-50 p-6 text-center transition
                    peer-checked:border-red-500 peer-checked:bg-red-50 peer-checked:scale-105">
          <div class="mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-red-100">
            <span class="text-xl">👨‍⚕️</span>
          </div>
          <h3 class="font-bold text-gray-900">Professionista Salute</h3>
          <p class="mt-2 text-sm text-gray-600">Medico, fisioterapista, ecc.</p>
        </div>
      </label>
      <!-- Professionista Benessere (VERDE) -->
      <label class="cursor-pointer">
        <%= f.radio_button :tipo_utente, "professionista_benessere", class: "peer sr-only", required: true %>
        <div class="rounded-2xl border-2 border-gray-200 bg-gray-50 p-6 text-center transition
                    peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:scale-105">
          <div class="mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-green-100">
            <span class="text-xl">🧘‍♀️</span>
          </div>
          <h3 class="font-bold text-gray-900">Professionista Benessere</h3>
          <p class="mt-2 text-sm text-gray-600">Coach, trainer, istruttore</p>
        </div>
      </label>
    </div>
  </div>
  <!-- Diventare insegnante -->
  <div>
    <label class="flex cursor-pointer items-start gap-3 rounded-2xl border-2 border-dashed border-gray-200 p-5">
      <%= f.check_box :diventa_insegnante,
            class: "mt-1 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500" %>
      <div>
        <span class="text-sm font-semibold text-gray-900">Voglio diventare insegnante</span>
        <p class="mt-1 text-sm text-gray-600">
          Ricevi informazioni sui percorsi di formazione per diventare insegnante certificato di Igiene Posturale.
        </p>
      </div>
    </label>
  </div>
  <!-- CTA -->
  <div class="flex flex-col gap-3 sm:flex-row">
    <%= f.submit (contact.persisted? ? "Aggiorna richiesta" : "Invia Richiesta"),
          class: "w-full rounded-full bg-blue-600 px-8 py-4 font-semibold text-white shadow hover:bg-blue-700 sm:w-auto" %>
    <%= link_to "Annulla",
          (contact.persisted? ? contact_path(contact) : contacts_path),
          class: "w-full rounded-full border-2 border-gray-300 px-8 py-4 text-center font-semibold text-gray-700 hover:bg-gray-50 sm:w-auto" %>
  </div>
  <!-- Privacy -->
  <p class="pt-2 text-center text-sm text-gray-500">
    ✓ I tuoi dati sono protetti &nbsp;|&nbsp; ✓ Nessuno spam &nbsp;|&nbsp; ✓ Risposta entro 24h
  </p>
<% end %>
