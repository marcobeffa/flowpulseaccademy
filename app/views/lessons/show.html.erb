<div class="mx-auto max-w-4xl px-6 py-10">
  <%= link_to "← Indice corso", course_path(@course["slug"]), class: "text-sm text-blue-600 hover:underline" %>
  <h1 class="mt-4 text-3xl font-bold"><%= @lesson["title"] %></h1>
  <% if @lesson["description"].present? %>
    <p class="mt-2 text-gray-600"><%= Array(@lesson["description"]).join(" ") %></p>
  <% end %>
  <div class="mt-6">
    <% if @lesson["url_copertina"].present? %>
      <img src="<%= @lesson["url_copertina"] %>" alt="Copertina lezione" class="w-full rounded-xl shadow" />
    <% else %>
      <%= youtube_iframe(@lesson["url_video"]) %>
    <% end %>
  </div>
  <div class="mt-6 flex gap-4">
    <% if @lesson["url_pdf"].present? %>
      <a href="<%= @lesson["url_pdf"] %>" target="_blank" class="inline-flex items-center px-4 py-2 rounded-lg border hover:bg-gray-50">PDF</a>
    <% end %>
    <% if @lesson["url_video"].present? %>
      <a href="<%= @lesson["url_video"] %>" target="_blank" class="inline-flex items-center px-4 py-2 rounded-lg border hover:bg-gray-50">Video</a>
    <% end %>
  </div>
  <% sheets = Array(@lesson["sheets"]) %>
  <% if sheets.any? %>
    <h2 class="mt-10 text-2xl font-semibold">Schede</h2>
    <div class="mt-4 space-y-4">
      <% sheets.each do |s| %>
        <div class="rounded-xl border p-4">
          <div class="text-sm uppercase tracking-wide text-gray-500"><%= s["type"].to_s.tr("_", " ") %></div>
          <% if s["title"].present? %>
            <h3 class="text-lg font-bold"><%= s["title"] %></h3>
          <% end %>
          <% if s["description"].present? %>
            <p class="text-gray-700 mt-1"><%= Array(s["description"]).join(" ") %></p>
          <% end %>
          <div class="mt-3 flex gap-3">
            <% if s["url_pdf"].present? %>
              <a href="<%= s["url_pdf"] %>" target="_blank" class="px-3 py-1 rounded border text-sm">PDF</a>
            <% end %>
            <% if s["url_video"].present? %>
              <a href="<%= s["url_video"] %>" target="_blank" class="px-3 py-1 rounded border text-sm">Video</a>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
