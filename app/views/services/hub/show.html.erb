<!-- app/views/services/hub/show.html.erb -->
<div class="container mx-auto py-10">
  <h1 class="text-2xl font-semibold mb-6">
    <span class="uppercase"><%= @domain_key %></span> â€” contenuti su <code><%= request.host %></code>
  </h1>
  <% if @folders.present? %>
    <div class="mb-8">
      <h2 class="text-lg font-semibold mb-3">Cartelle</h2>
      <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3">
        <% @folders.each do |f| %>
          <li class="border rounded-xl p-3 hover:shadow-sm transition">
            <div class="text-sm text-gray-500">#<%= "%02d" % f[:nn] %></div>
            <div class="font-medium"><%= f[:name] %></div>
            <div class="text-xs text-gray-400"><code><%= @domain_key %>/<%= f[:raw] %></code></div>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div>
    <h2 class="text-lg font-semibold mb-3">Contenuti disponibili</h2>
    <% if @cards.blank? %>
      <p class="text-gray-500">Nessun file trovato nelle cartelle di <code><%= @domain_key %></code>.</p>
    <% else %>
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
        <% @cards.each do |c| %>
          <div class="border rounded-2xl p-4 hover:shadow-sm transition">
            <div class="text-xs uppercase tracking-wide text-gray-500 mb-1"><%= c[:service] %></div>
            <div class="text-base font-semibold mb-2"><%= c[:title] %></div>
            <% if c[:date] %>
              <div class="text-xs text-gray-500 mb-2"><%= l c[:date] %></div>
            <% end %>
            <% if c[:url] %>
              <%= link_to "Apri", c[:url], class: "inline-block mt-2 px-3 py-1 rounded-md border text-sm hover:bg-gray-50" %>
            <% else %>
              <span class="inline-block mt-2 px-3 py-1 rounded-md border text-sm text-gray-400">Nessun link</span>
            <% end %>
            <div class="mt-3 text-[11px] text-gray-400 truncate"><code><%= c[:file].sub(Rails.root.to_s + "/", "") %></code></div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
