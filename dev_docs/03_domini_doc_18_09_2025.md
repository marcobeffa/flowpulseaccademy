# domini
  Vorrei rimettere a posto accademyflowpulse settando config/domains.yml e le rotte ripartendo da 0:  

- Ogni domain abbia un landing chiaro (il tuo root_path → pages_home).

- Ogni service possa decidere la sorgente dati (root_data: cartelle YML o DB).

- Le rotte dei servizi vengano montate solo sugli host previsti (dominio o sottodominio).

- La “costruzione” di address (subdomain + dominio) non stia nello YAML ma in Ruby (più sicuro/flessibile).


- Flowpulse se presente if  active_service.details.address(è presente nell'elenco sottodomini) = flowpulse.#{domain.host}/#{key} come dominio vero e proprio

- root_path punta root_path → controller_action (domains.url_landing: "domains/ilgiardinodelcorpo" -> /) poi in base ha ogni domains ti dice dove prendere il codice controller action

- root_data: (sceglie se i dati vengono raccolti dalle cartelle o dal database )

- landing_path è sempre/ con il dominio originale. e il dominio originale punta a controller#action): il controller Domains::HomeController può leggere questo valore e fare redirect_to landing_path o render dedicato.


- active_services sono riferiti al services.key

- Le rotte dei servizi vengano montate solo sugli host previsti (dominio o sottodominio).


# config/domains.yml
# per ogni service key -> viene messo un draw  in routed   




services: 
  - key: onlinecourses
    subdomain: flowpulse # il sottodominio si for flowpulse.posturacorretta.org/onlinecourses
    original_domain: flowpulse.net # è il dominio del servizio flowpulse fa da flowpulse con 
    title: "Corsi Online"
    description: "Catalogo corsi online"
    image_url: null
    state: active
    records_database: null   
  
  - key: teaching
    subdomain: flowpulse
    original_domain: flowpulse.net
    title: "Corsi con insegnanti"
    description: "Per imparare e certificare il tuo apprendimento"
    image_url: null
    state: develop
    records_database: null  
    
 
  - key: questionnaire
    subdomain: flowpulse
    original_domain: flowpulse.net
    title: "Questionari e Valutazioni"
    description: "le tue valutazioni"
    image_url: null
    state: develop
    records_database: null  
   
   

  - key: blog
    subdomain: flowpulse
    original_domain: flowpulse.net
    title: "Accademia"
    description: "i tuoi contenuti"
    image_url: null
    state: develop
    records_database: posts  
   
   
  


# i domini normali sono qui   i domini con i sottodomini       

domains:
  - host: flowpulse.net
    aliases: [ "www.flowpulse.net" ]
    description: "La prima accademia salute lavoro e crescita personale, che si basa sulla nostra fisiologia!"
    favicon: null
    url_landing: "domains/flowpulse" # controller/action 
    active_services: [onlinecourses] # è il servizio e attivo il servizio... 
  - host: posturacorretta.org
    aliases: [ "posturacorretta.org" ]
    description: "Postura, prevenzione e movimento"
    url_landing: "domains/posturacorretta"
    favicon: null
    active_services: [onlinecourses]
  - host: "igieneposturale.it"
    aliases: [ "igieneposturale.it" ]
    description: "Liberati da rigidità e tensione"
    url_landing: "domains/igieneposturale"
    favicon: null
    active_services: 
  - host: "stopaldolore.org"
    aliases: [ "igieneposturale.it" ]
    description: "Le linee guida e gli strumenti per risolvere il tuo dolore!"
    url_landing: "domains/stopaldolore"
    favicon: null
    active_services: 
  - name: "benessereintegrato.it"
    description: "Le linee guida per costruire il tuo percorso della salute"
    url_landing: "domains/benessereintegrato"
    favicon: null
    active_services: 
  - name: "generaimpresa.it"
    description: "Impresa, strumenti e processi"
    url_landing: "domains/generaimpresa"
    favicon: null
    active_services: 
  - name: "1impegno.it"
    description: "Gestione delle risorse"
    url_landing: "domains/impegno"
    favicon: 
    active_services: 
  - name: "rails4b.com"
    description: "Sviluppo app ruby on rails on Rails"
    url_landing: "rails4b.com"
    favicon: null
    active_services: 
  - name: "markpostura.com, markpostura.it"
    description: "La pagina di mark postura"
    url_landing: "markpostura.com"
    favicon: null
    active_services: 
  - name: "ilgiardinodelcorpo.it"
    description: "Per l'evoluzione armonica dell'essere umano"
    url_landing: "domains/ilgiardinodelcorpo"
    favicon: null
    active_services: 
       
       
  # il layout è dashboard per i services e landing per i services


details:
  #  mentre i domini puntano alle landing tramite controller e action 
  # i service (tramite gli active_services attivi) vanno a pescare dal  records_database: se c'è se è null deve andare a pescare da:
  yml_root: "config/yml_data/*" # prima si calcola l'albero delle cartelle e ogni cartella viene dato un ordine e un nome category:
  
 
  name_folder: "#{nn}_#{category}" # nn ordine cartelle_nestate creazione categoria name folder è formato da nn l'ordine della cartella e category è il nome della categoria
  # si crea così una :taxonomy_category che sarà caricata dalla routes per raggiungere 
  # per pescare le info si guarda l'indirizzo  che è formato da
  address: "#{subdomain}.#{domain.name}/#{key}" # flowpulse.posturacorretta.org/onlinecourses
  # subdomain indica il active_services che viene chimato (flowpulse) 
  # - da quale dominio: posturacorretta che indica la cartella da cui partire: 
  # / su quale draw: onlinecourses
  # es config/courses/data_yml/01_salute/01_posturacorretta/01_postura-e-fisiologia/01-igiene-posturale/igiene-posturale_onlinecourses_22_09_2024.yml
  # visto che il dominio è posturacorretta.org punterà alla cartella posturacorretta e mostrerà 
  # le sottocartelle di posturacorretta se ci sono (senza nn)
  index_folder: "#{subdomain}.domain.*"
  show_folder: "#{subdomain}.domain.*/#{key}/:taxonomy_category" #caricata dalla routes
  # mostrerà le categorie folder
  # e mostrerà i file da database se records_database: posts "l'index"
  # se no dai file presenti nella cartella si caricano come index base  alla cartella  
  format_file: "#{nn}_#{slug}-#{key}-#{dd-mm-yy}.yml" # dd-mm-yy per la versione
  # e ci sarà un submenu per i active_service 

  index_service_active: "#{subdomain}.domain.*/#{key}"
  # se non  c'è la :key  il submenu punta il submenu sulla voce tutti e carica tutti i file presenti:
  # 01_onlinecourse_dd_mm_yyyy.yml 02_teaching_dd_mm_yyyy.yml
  # se c'è la key key= onlinecourses carica solo nn_slug_onlinecourse_dd_mm_yyyy.yml 
  show_service_active: "#{subdomain}.domain.*/#{key}/:slug"
  
  # ci sono due submenu uno per le cartelle l'altro per i service_active
  

  # details in realà è dato per calcolare in automatico i domini degli active services non va li andrà messo in un file ruby! niente concerns solo draw academyflpwpulse. è il subdomain + il dominio dove c'è il service, ma poi posso montare gli altri ative service ad esempio flowpulse.flowpulse/onlinecourses/ userei :no l'opzione domains:
  flowpulse.net:
    aliases: ["www.flowpulse.net"]
    url_landing: "/flowpulse"
    active_services: ["onlinecourses"]  # <— aggiungi qui   ma eliminerei l'opzione di avere il path:  https://flowpulse.net/onlinecourses/ (path)
perchè se no non si capisce che è caricato l'active services che ne pensi?
https://flowpulse.flowpulse.net/onlinecourses/ (sottodominio)   il servizio onlinecourses dovrebbe poter essere montato su: flowpulse.posturacorretta.org/onlinecourses su flowpulse.flowpulse.net/onlinecourses o su altri flowpulse.stopaldolore.org/onlinecourses e poi se voglio andare a vedere cosa offre il servizio vado su flowpulse che mi  indirizza alla landing page!    poi mancano i dati seo per ogni domain (i dati seo si rivolgono solo al domain non al subdomain flowpulse.posturacorretta.org/onlinecourses fara riferimento ai dati seo del dominio posturacorrett.org, flowpulse.flowpulse.net/onlinecourses a -> flowpulse.net e cosi via i sotto domini hanno la seo del dominio principale)  e poi il dominio originale -> punta a dominio che punta alla landing, in definitiva restano o il dominio "chiamiamolo normale che punta alla landing oppure il sottodominio che punta all'active_service di un dominio principale" e a ste punto: url_landing: "/flowpulse" e il controller e l'action in questo caso indicarla direttamente nella routes se invece url_landing: "www.igieneposturale.it" o altrove... che ne dici? 

"



# Ogni domain abbia un landing chiaro (il tuo root_path → pages_home).

# Ogni service possa decidere la sorgente dati (root_data: cartelle YML o DB).

# Le rotte dei servizi vengano montate solo sugli host previsti (dominio o sottodominio).

# La “costruzione” di address (subdomain + dominio) non stia nello YAML ma in Ruby (più sicuro/flessibile).


# Flowpulse se presente if  active_service.details.address(è presente nell'elenco sottodomini) = flowpulse.#{domain.host}/#{key} come dominio vero e proprio

# root_path punta root_path → controller_action (domains.url_landing: "domains/ilgiardinodelcorpo" -> /) poi in base ha ogni domains ti dice dove prendere il codice controller action

# root_data: (sceglie se i dati vengono raccolti dalle cartelle o dal database )

# landing_path è sempre/ con il dominio originale. e il dominio originale punta a controller#action): il controller Domains::HomeController può leggere questo valore e fare redirect_to landing_path o render dedicato.


# active_services sono riferiti al services.key

# Le rotte dei servizi vengano montate solo sugli host previsti (dominio o sottodominio).


# config/domain.yml
# per ogni service key -> viene messo un draw  in routed   




services: 
  onlinecourses:
    title: "Corsi Online"
    description: "Catalogo corsi online"
    original_domain: "flowpulse.net"     # dominio 'proprio' del servizio
    subdomain: "flowpulse"               # come sottodominio sugli altri host
    state: "active"
    source:
      type: "yml"                        # "yml" | "db"
      root: "config/courses"             # cartelle YML (se type=yml)

  teaching:
    title: "Corsi con insegnanti"
    description: "Per imparare e certificare"
    original_domain: "flowpulse.net"
    subdomain: "flowpulse"
    state: "develop"
    source:
      type: "yml"
      root: "config/teaching"

  questionnaire:
    title: "Questionari e Valutazioni"
    description: "Le tue valutazioni"
    original_domain: "flowpulse.net"
    subdomain: "flowpulse"
    state: "develop"
    source:
      type: "yml"
      root: "config/questionnaires"

  blog:
    title: "I tuoi contenuti"
    description: "Crea il tuo brand e il tuo marketing con i contenuti"
    original_domain: "flowpulse.net"
    subdomain: "flowpulse"
    state: "develop"
    source:
      type: "db"                         # DB: usa model sotto
      model: "Post"

   

    


# i domini normali sono qui   i domini con i sottodomini       

domains:
  flowpulse.net:
    aliases: ["www.flowpulse.net"]
    description: "L'accademia salute lavoro e crescita personale, che si basa sulla nostra fisiologia!"
    url_landing: "domains/home#flowpulse"     # controller#action
    active_services: ["onlinecourses","teaching","questionnaire","blog"]
    favicon: null
    url_landing: "/flowpulse" # controller/action 
    active_services: [onlinecourses] # è il servizio e attivo il servizio... 
  
  posturacorretta.org:
    aliases: [ "posturacorretta.org" ]
    description: "Postura, prevenzione e movimento"
    url_landing: "domains/posturacorretta"
    favicon: null
    active_services: [onlinecourses]
  - host: "igieneposturale.it"
    aliases: [ "igieneposturale.it" ]
    description: "Liberati da rigidità e tensione"
    url_landing: "domains/igieneposturale"
    favicon: null
    active_services: 
  - host: "stopaldolore.org"
    aliases: [ "igieneposturale.it" ]
    description: "Le linee guida e gli strumenti per risolvere il tuo dolore!"
    url_landing: "domains/stopaldolore"
    favicon: null
    active_services: 
  - name: "benessereintegrato.it"
    description: "Le linee guida per costruire il tuo percorso della salute"
    url_landing: "domains/benessereintegrato"
    favicon: null
    active_services: 
  - name: "generaimpresa.it"
    description: "Impresa, strumenti e processi"
    url_landing: "domains/generaimpresa"
    favicon: null
    active_services: 
  - name: "1impegno.it"
    description: "Gestione delle risorse"
    url_landing: "domains/impegno"
    favicon: 
    active_services: 
  - name: "rails4b.com"
    description: "Sviluppo app ruby on rails on Rails"
    url_landing: "rails4b.com"
    favicon: null
    active_services: 
  - name: "markpostura.com, markpostura.it"
    description: "La pagina di mark postura"
    url_landing: "markpostura.com"
    favicon: null
    active_services: 
  - name: "ilgiardinodelcorpo.it"
    description: "Per l'evoluzione armonica dell'essere umano"
    url_landing: "domains/ilgiardinodelcorpo"
    favicon: null
    active_services: 
       
       
  # il layout è dashboard per i services e landing per i services


details:
  #  mentre i domini puntano alle landing tramite controller e action 
  # i service (tramite gli active_services attivi) vanno a pescare dal  records_database: se c'è se è null deve andare a pescare da:
  yml_root: "config/yml_data/*" # prima si calcola l'albero delle cartelle e ogni cartella viene dato un ordine e un nome category:
  
 
  name_folder: "#{nn}_#{category}" # nn ordine cartelle_nestate creazione categoria name folder è formato da nn l'ordine della cartella e category è il nome della categoria
  # si crea così una :taxonomy_category che sarà caricata dalla routes per raggiungere 
  # per pescare le info si guarda l'indirizzo  che è formato da
  address: "#{subdomain}.#{domain.name}/#{key}" # flowpulse.posturacorretta.org/onlinecourses
  # subdomain indica il active_services che viene chimato (flowpulse) 
  # - da quale dominio: posturacorretta che indica la cartella da cui partire: 
  # / su quale draw: onlinecourses
  # es config/courses/data_yml/01_salute/01_posturacorretta/01_postura-e-fisiologia/01-igiene-posturale/igiene-posturale_onlinecourses_22_09_2024.yml
  # visto che il dominio è posturacorretta.org punterà alla cartella posturacorretta e mostrerà 
  # le sottocartelle di posturacorretta se ci sono (senza nn)
  index_folder: "#{subdomain}.domain.*"
  show_folder: "#{subdomain}.domain.*/#{key}/:taxonomy_category" #caricata dalla routes
  # mostrerà le categorie folder
  # e mostrerà i file da database se records_database: posts "l'index"
  # se no dai file presenti nella cartella si caricano come index base  alla cartella  
  format_file: "#{nn}_#{slug}-#{key}-#{dd-mm-yy}.yml" # dd-mm-yy per la versione
  # e ci sarà un submenu per i active_service 

  index_service_active: "#{subdomain}.domain.*/#{key}"
  # se non  c'è la :key  il submenu punta il submenu sulla voce tutti e carica tutti i file presenti:
  # 01_onlinecourse_dd_mm_yyyy.yml 02_teaching_dd_mm_yyyy.yml
  # se c'è la key key= onlinecourses carica solo nn_slug_onlinecourse_dd_mm_yyyy.yml 
  show_service_active: "#{subdomain}.domain.*/#{key}/:slug"
  
  # ci sono due submenu uno per le cartelle l'altro per i service_active
  

  # details in realà è dato per calcolare in automatico i domini degli active services non va li andrà messo in un file ruby! niente concerns solo draw academyflpwpulse. è il subdomain + il dominio dove c'è il service


  